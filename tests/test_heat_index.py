import pytest

from weathervane.weather import Weather


@pytest.mark.parametrize("temperature,humidity,expected", [
    (27, 40, 27), (27, 45, 27), (27, 50, 27), (27, 55, 27), (27, 60, 28), (27, 65, 28), (27, 70, 28), (27, 75, 29),
    (27, 80, 29), (27, 85, 29), (27, 90, 30), (27, 95, 30), (27, 100, 31),
    (28, 40, 27), (28, 45, 28), (28, 50, 28), (28, 55, 29), (28, 60, 29), (28, 65, 29), (28, 70, 30), (28, 75, 31),
    (28, 80, 32), (28, 85, 32), (28, 90, 33), (28, 95, 34), (28, 100, 35), (29, 40, 28),
    (29, 45, 29), (29, 50, 29), (29, 55, 30), (29, 60, 31), (29, 65, 32), (29, 70, 32), (29, 75, 33), (29, 80, 34),
    (29, 85, 36), (29, 90, 37), (29, 95, 38), (29, 100, 39),
    (30, 40, 29), (30, 45, 31), (30, 50, 31), (30, 55, 32), (30, 60, 33), (30, 65, 34), (30, 70, 35), (30, 75, 36),
    (30, 80, 38), (30, 85, 39), (30, 90, 41), (30, 95, 42), (30, 100, 44),
    (31, 40, 31), (31, 45, 32), (31, 50, 33), (31, 55, 34), (31, 60, 35), (31, 65, 37), (31, 70, 38), (31, 75, 39),
    (31, 80, 41), (31, 85, 43), (31, 90, 45), (31, 95, 47), (31, 100, 49),
    (32, 40, 33), (32, 45, 34), (32, 50, 35), (32, 55, 36), (32, 60, 38), (32, 65, 39), (32, 70, 41), (32, 75, 43),
    (32, 80, 45), (32, 85, 47), (32, 90, 50), (32, 95, 53), (32, 100, 56),
    (33, 40, 34), (33, 45, 36), (33, 50, 37), (33, 55, 38), (33, 60, 41), (33, 65, 42), (33, 70, 44), (33, 75, 47),
    (33, 80, 49), (33, 85, 52), (33, 90, 55),
    (34, 40, 36), (34, 45, 38), (34, 50, 39), (34, 55, 41), (34, 60, 43), (34, 65, 46), (34, 70, 48), (34, 75, 51),
    (34, 80, 54), (34, 85, 57),
    (36, 40, 38), (36, 45, 40), (36, 50, 42), (36, 55, 44), (36, 60, 47), (36, 65, 49), (36, 70, 54), (36, 75, 56),
    (37, 40, 41), (37, 45, 43), (37, 50, 45), (37, 55, 47), (37, 60, 51), (37, 65, 53), (37, 70, 57),
    (38, 40, 43), (38, 45, 46), (38, 50, 48), (38, 55, 51), (38, 60, 54), (38, 65, 58),
    (39, 40, 46), (39, 45, 48), (39, 50, 51), (39, 55, 54), (39, 60, 58),
    (40, 40, 48), (40, 45, 51), (40, 50, 55), (40, 55, 58),
    (41, 40, 51), (41, 45, 54), (41, 50, 58),
    (42, 40, 54), (42, 45, 58),
    (43, 40, 58)])
def test_heat_index(temperature, humidity, expected):
    assert abs(Weather.heatindex(temperature, humidity) - expected) <= 2
